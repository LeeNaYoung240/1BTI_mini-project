<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>1BTI:Home</title>
    <!-- Bootstrap CSS Ïä§ÌÉÄÏùºÏãúÌä∏Î•º Í∞ÄÏ†∏Ïò§Í∏∞ ÏúÑÌïú link ÌÉúÍ∑∏. -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <!-- Bootstrap JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>

    <style>
        /*Ìè∞Ìä∏*/
        @import url('https://fonts.googleapis.com/css2?family=Gowun+Dodum&display=swap');

        * {
            font-family: "Gowun Dodum", sans-serif;
        }

        /*ÏÉÅÎã®Ïùò Î°úÍ≥†*/
        .title_logo {
            height: 100px;
            /*Î°úÍ≥† ÎÜíÏù¥ 150*/
            color: white;
            /*ÌÖçÏä§Ìä∏ ÏÉâÏÉÅ : white*/

            display: flex;
            /* flexbox Î†àÏù¥ÏïÑÏõÉÏùÑ ÏÇ¨Ïö©ÌïòÏó¨ ÏöîÏÜåÎ•º Í∞ÄÏö¥Îç∞ Ï†ïÎ†¨ */
            flex-direction: column;
            /* ÏÑ∏Î°ú Î∞©Ìñ•ÏúºÎ°ú Î∞∞Ïπò */
            align-items: center;
            /* ÏàòÌèâÍ≥º ÏàòÏßÅÏúºÎ°ú Í∞ÄÏö¥Îç∞ Ï†ïÎ†¨ */
            justify-content: center;

            /* Î∞∞Í≤Ω Ïù¥ÎØ∏ÏßÄ ÏÑ§Ï†ï */
            background-image: url('https://github.com/LeeNaYoung240/LeeNaYoung240.github.io/assets/107848521/6ec7b3af-603c-49e4-a70e-2144e82c7dc0');
            background-position: center;
            background-size: cover;
            /* Î∞∞Í≤Ω Ïù¥ÎØ∏ÏßÄÎ•º Ïª§Î≤ÑÌïòÎäî ÌÅ¨Í∏∞Î°ú ÏÑ§Ï†ï */
        }

        .logoImage {
            width: 180px;
            height: 200px;
        }


        body {
            background-color: white;
        }

        .image>img {
            border-radius: 10px;
            box-shadow: 0px 0px 10px 0px rgba(0, 0, 0, 0.1);
        }


        .intro_container {
            width: calc(100% - 600px);
            max-width: 100%;
            border-radius: 10px;
            box-shadow: 0px 0px 10px 0px rgba(0, 0, 0, 0.1);
            display: inline-block;
            text-align: center;
            color: black;
        }
    </style>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script type="module">
        // Firebase SDK ÎùºÏù¥Î∏åÎü¨Î¶¨ Í∞ÄÏ†∏Ïò§Í∏∞
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
        import { getAuth, createUserWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-auth.js";
        import { getFirestore, collection, addDoc, getDocs, setDoc, doc, query, where } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
        import { getStorage, ref, uploadBytes } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-storage.js";
        import { getDownloadURL } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-storage.js";

        // Firebase Íµ¨ÏÑ± Ï†ïÎ≥¥ ÏÑ§Ï†ï
        const firebaseConfig = {
            apiKey: "AIzaSyCzIX5h8SwGdDyZLsjja-eN-BwFutMGkvY",
            authDomain: "sparta-26114.firebaseapp.com",
            projectId: "sparta-26114",
            storageBucket: "sparta-26114.appspot.com",
            messagingSenderId: "218194191462",
            appId: "1:218194191462:web:647832dcba096f347eb9a7",
            measurementId: "G-JGP1CSZ3GR"
        };

        // Firebase Ïù∏Ïä§ÌÑ¥Ïä§ Ï¥àÍ∏∞Ìôî
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        const storage = getStorage(app);


        // Î™®Îã¨Ï∞Ω ÌåÄÏõê Ï∂îÍ∞Ä Îì±Î°ù Ï†ÄÏû•ÌïòÍ∏∞ Î≤ÑÌäº ÌÅ¥Î¶≠ Ïãú 
        $("#saveAddteam").click(async function () {

            let inputName = $('#inputName').val();
            let inputIntro = $('#inputIntro').val();
            let inputHobby = $('#inputHobby').val();
            let inputMbti = $('#inputMbti').val();
            let inputAdv = $('#inputAdv').val();
            let inputDis = $('#inputDis').val();
            let inputNickname = $('#inputNickname').val();
            let inputMotto = $('#inputMotto').val();
            let uploadPhoto = $('#uploadPhoto').prop('files')[0];

            // image url Ï†ïÏùò
            let imageURL;

            try {

                const imageURL = await uploadImageAndGetURL(uploadPhoto);

                const teamMembersCollection = collection(db, 'teamMembers');

                // ÎèôÏùºÌïú Ïù¥Î¶ÑÏù¥ ÏûàÎäî ÏßÄ ÌôïÏù∏
                const querySnapshot = await getDocs(query(teamMembersCollection, where("Name", "==", inputName)));
                if (!querySnapshot.empty) {
                    alert("Ïù¥ÎØ∏ Ï°¥Ïû¨ÌïòÎäî Ïù¥Î¶ÑÏù¥ÏóêÏöî. Ïù¥Î¶Ñ ÏòÜÏóê AÎ•º Î∂ôÏó¨Ï£ºÏÑ∏Ïöî.");
                    return;
                }
                // Ï†ÄÏû• Ïù¥Î¶Ñ Î≥ÄÍ≤Ω 
                await setDoc(doc(teamMembersCollection, inputName), {
                    Name: inputName,
                    Intro: inputIntro,
                    Hobby: inputHobby,
                    Mbti: inputMbti,
                    Adv: inputAdv,
                    Dis: inputDis,
                    Nickname: inputNickname,
                    Motto: inputMotto,
                    PhotoURL: imageURL,
                });

                $('#inputName').val('');
                $('#inputIntro').val('');
                $('#inputHobby').val('');
                $('#inputMbti').val('');
                $('#inputAdv').val('');
                $('#inputDis').val('');
                $('#inputNickname').val('');
                $('#inputMotto').val('');
                $('#uploadPhoto').val('');

                alert('Ï∂ïÌïòÌï©ÎãàÎã§. ÌåÄÏõêÏúºÎ°ú Îì±Î°ùÎêòÏóàÏñ¥Ïöî!');
                window.location.reload();
            } catch (error) {
                // console.error("Î¨¥ÏóáÏù¥ errorÏù∏Í∞Ä : ", error);
                alert('Ï†ÄÏû•Ïóê Ïã§Ìå®ÌïòÏòÄÏñ¥Ïöî.');
            }
        });

        // firebase storageÏóê image Ï†ÄÏû• ÌõÑ url Ï£ºÏÜå Í∞ÄÏ†∏Ïò§Í∏∞ 
        async function uploadImageAndGetURL(imageFile) {
            try {
                const storageRef = ref(storage, 'images/' + imageFile.name);
                await uploadBytes(storageRef, imageFile);

                // firebase - storage ÏóêÏÑú Ïù¥ÎØ∏ÏßÄÏ£ºÏÜå Í∞ÄÏ†∏Ïò§Í∏∞
                const downloadURL = await getDownloadURL(storageRef);
                // console.log('Image URL:', downloadURL);
                return downloadURL;

            } catch (error) {
                // console.error('Error uploading image:', error); 
                throw error;
            }
        }



        $(document).ready(async function () {

            $('.carousel-inner').empty();
            // ÌåÄÏõê Ï†ÄÏû•ÎÇ¥Ïö© Î∂àÎü¨Ïò§Í∏∞
            let docs = await getDocs(collection(db, "teamMembers"));

            docs.forEach((doc) => {
                let row = doc.data();

                let inputName = row['Name'];
                let inputIntro = row['inputIntro'];
                let inputHobby = row['Hobby'];
                let inputMbti = row['Mbti'];
                let inputAdv = row['Adv'];
                let inputDis = row['Dis'];
                let inputNickname = row['Nickname'];
                let inputMotto = row['Motto'];
                let photoURL = row['PhotoURL'];

                let html = `
                <div class="carousel-item">
                    <svg class="bd-placeholder-img" width="100%" height="600px" xmlns="http://www.w3.org/2000/svg"
                        aria-hidden="true" preserveAspectRatio="xMidYMid slice" focusable="false">
                        <rect width="100%" height="100%" fill="#D6E6F2"></rect>
                    </svg>
                    <div class="container">
                        <div class="carousel-caption">
                            <div class="image">
                                <img align="left"
                                    src="${photoURL}"
                                    alt="${inputName}" style="width:400px;">
                            </div>
                            <div class="intro_container">
                                <h1>${inputName}</h1>

                                <div class="mbtiBtn">
                                    <button type="button" class="btn btn-primary position-relative">
                                        ${inputMbti}<span
                                            class="position-absolute top-0 start-100 translate-middle p-1 bg-danger border border-light rounded-circle">
                                            <i class="fas fa-heart text-white" style="font-size: 0.85rem;"></i>
                                            <span class="visually-hidden">New alerts</span>
                                        </span>
                                    </button>
                                </div>

                                <h5>ÏûêÍ∏∞ÏÜåÍ∞úÏÑú üíÅ‚Äç‚ôÄÔ∏è</h5>
                                <p> Ìïú Ï§Ñ ÌÇ§ÏõåÎìú : ${inputIntro}</p>
                                <p> Ï∑®ÎØ∏ : ${inputHobby}</p>
                                <p> MBTI : ${inputMbti}</p>
                                <p> Ïû•Ï†ê : ${inputAdv}</p>
                                <p> Îã®Ï†ê : ${inputDis}</p>
                                <p> Î≥ÑÎ™Ö : ${inputNickname}</p>
                                <p> Ï¢åÏö∞Î™Ö : ${inputMotto}</p>

                                <p><a class="btn btn-lg btn-primary" href="#">Make a comment</a></p>
                            </div>
                        </div>
                    </div>
                </div>`;
                $('.carousel-inner').append(html);
            });

            $('.carousel-item').first().addClass('active');


            // carousel ÏïÑÎûò Î™©Î°ù Î≤ÑÌäº Ï∂îÍ∞Ä
            let indicatorCount = $('.carousel-indicators button').length; // Î™©Î°ù Í∞úÏàò ÌôïÏù∏
            // Î™©Î°ù Î≤ÑÌäº Ï∂îÍ∞Ä
            let newIndicator = `<button type="button" data-bs-target="#myCarousel" data-bs-slide-to="${indicatorCount}" aria-label="Slide ${indicatorCount + 1}"></button>`;
            $('.carousel-indicators').append(newIndicator);

            // Í∏∞Ï°¥ ÎßàÏßÄÎßâ Î™©Î°ùÎ≤ÑÌäº active ÏÇ≠Ï†ú, ÎßàÏßÄÎßâ Î™©Î°ùÎ≤ÑÌäºÏóê active Í∏∞Îä• Ï∂îÍ∞Ä
            $('.carousel-indicators button').removeClass('active');
            $(`.carousel-indicators button[data-bs-slide-to="${indicatorCount}"]`).addClass('active');

        });



    </script>
</head>

<body>
    <header class="p-3 text-bg-dark">
        <!-- Ïª®ÌÖåÏù¥ÎÑàÎ•º Ìè¨Ìï®ÌïòÎäî div ÏöîÏÜåÎ°ú Ìó§ÎçîÎ•º Í∞êÏã∏Ï§å -->
        <div class="container">
            <!-- flexboxÎ•º ÏÇ¨Ïö©ÌïòÏó¨ ÏöîÏÜåÎì§ÏùÑ Í∞ÄÎ°úÎ°ú Ï†ïÎ†¨ -->
            <div class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start">
                <!-- Î°úÍ≥† ÎßÅÌÅ¨, ÌôàÏúºÎ°ú Ïù¥ÎèôÌïòÎäî ÎßÅÌÅ¨Î°ú ÏÑ§Ï†ï-->
                <a href="/" class="d-flex align-items-center mb-2 mb-lg-0 text-white text-decoration-none">
                    <svg class="bi me-2" width="40" height="32" role="img" aria-label="Bootstrap">
                        <use xlink:href="#bootstrap"></use>
                    </svg>
                </a>
                <img src="https://github.com/LeeNaYoung240/LeeNaYoung240.github.io/assets/107848521/7a88cc7b-a0cc-46ff-b75a-f5be7abb13c2"
                    alt="ÌåÄ Î°úÍ≥†" width="200" height="150">
                <!-- Î©îÎâ¥ Î™©Î°ù -->
                <ul class="nav col-12 col-lg-auto me-lg-auto mb-2 justify-content-center mb-md-0">
                    <li><a href="./Home.html" class="nav-link px-2 text-secondary">Home</a></li>
                    <li><a href="./swipe_intro.html" class="nav-link px-2 text-secondary">Mypage</a></li>
                    <li><a href="./question1.html" class="nav-link px-2 text-danger">ÏÑ§Î¨∏ ÌïòÎü¨Í∞ÄÍ∏∞</a></li>
                    <li><a href="#" class="nav-link px-2 text-secondary" data-bs-toggle="modal"
                            data-bs-target="#addTeamModal">ÌåÄÏõê Îì±Î°ùÌïòÍ∏∞</a></li>
                </ul>
            </div>
        </div>
    </header>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <div class="main">
        <!-- ÏÉàÎ°úÏö¥ ÌåÄÏõêÏ∂îÍ∞Ä ModalÏ∞Ω -->
        <div class="modal fade" id="addTeamModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header">
                        <h1 class="modal-title fs-5" id="modalTitle">ÌåÄÏõê Ï∂îÍ∞Ä</h1>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <div class="form-floating mb-3">
                            <input type="text" class="form-control" id="inputName" placeholder="Ïù¥Î¶Ñ">
                            <label for="floatingInput">Ïù¥Î¶Ñ</label>
                        </div>
                        <div class="form-floating mb-3">
                            <input type="text" class="form-control" id="inputIntro" placeholder="ÌïúÏ§Ñ ÏÜåÍ∞ú">
                            <label for="floatingInput">Ìïú Ï§Ñ ÏÜåÍ∞ú</label>
                        </div>
                        <div class="form-floating mb-3">
                            <input type="text" class="form-control" id="inputHobby" placeholder="Ï∑®ÎØ∏">
                            <label for="floatingInput">Ï∑®ÎØ∏</label>
                        </div>
                        <div class="form-floating mb-3">
                            <input type="text" class="form-control" id="inputMbti" placeholder="MBTI">
                            <label for="floatingInput">MBTI</label>
                        </div>
                        <div class="form-floating mb-3">
                            <input type="text" class="form-control" id="inputAdv" placeholder="Ïû•Ï†ê">
                            <label for="floatingInput">ÏÑ±Í≤©Ïùò Ïû•Ï†ê</label>
                        </div>
                        <div class="form-floating mb-3">
                            <input type="text" class="form-control" id="inputDis" placeholder="Îã®Ï†ê">
                            <label for="floatingInput">ÏÑ±Í≤©Ïùò Îã®Ï†ê</label>
                        </div>
                        <div class="form-floating mb-3">
                            <input type="text" class="form-control" id="inputNickname" placeholder="Î≥ÑÎ™Ö">
                            <label for="floatingInput">Î≥ÑÎ™Ö</label>
                        </div>
                        <div class="form-floating mb-3">
                            <input type="text" class="form-control" id="inputMotto" placeholder="Ï¢åÏö∞Î™Ö">
                            <label for="floatingInput">Ï¢åÏö∞Î™Ö</label>
                        </div>
                        <div class="input-group mb-3">
                            <label class="input-group-text" for="inputGroupFile01">ÎÇòÏùò ÏÇ¨ÏßÑ</label>
                            <input type="file" class="form-control" id="uploadPhoto">
                        </div>
                        <div class="modal-footer">
                            <button id="saveAddteam" type="button" class="btn btn-primary">Ï†ÄÏû•ÌïòÍ∏∞</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>


        <!-- carousel -->
        <div id="myCarousel" class="carousel slide mb-6" data-bs-ride="carousel">
            <div class="carousel-indicators">
                <button type="button" data-bs-target="#myCarousel" data-bs-slide-to="0" aria-label="Slide 1"
                    class=""></button>
                <button type="button" data-bs-target="#myCarousel" data-bs-slide-to="1" aria-label="Slide 2"
                    class=""></button>
                <button type="button" data-bs-target="#myCarousel" data-bs-slide-to="2" aria-label="Slide 3"
                    class=""></button>
                <button type="button" data-bs-target="#myCarousel" data-bs-slide-to="3" aria-label="Slide 4" class=""
                    aria-current="true"></button>
            </div>

            <div class="carousel-inner">
                <div class="carousel-item">
                    <svg class="bd-placeholder-img" width="100%" height="600px" xmlns="http://www.w3.org/2000/svg"
                        aria-hidden="true" preserveAspectRatio="xMidYMid slice" focusable="false">
                        <rect width="100%" height="100%" fill="#D6E6F2"></rect>
                    </svg>
                    <!-- photo and text in carousel -->
                </div>
                <div class="carousel-item">
                    <svg class="bd-placeholder-img" width="100%" height="600px" xmlns="http://www.w3.org/2000/svg"
                        aria-hidden="true" preserveAspectRatio="xMidYMid slice" focusable="false">
                        <rect width="100%" height="100%" fill="#D6E6F2"></rect>
                    </svg>
                    <!-- photo and text in carousel -->
                </div>
                <div class="carousel-item active">
                    <svg class="bd-placeholder-img" width="100%" height="600px" xmlns="http://www.w3.org/2000/svg"
                        aria-hidden="true" preserveAspectRatio="xMidYMid slice" focusable="false">
                        <rect width="100%" height="100%" fill="#D6E6F2"></rect>
                    </svg>
                    <!-- photo and text in carousel -->
                </div>
                <div class="carousel-item">
                    <svg class="bd-placeholder-img" width="100%" height="600px" xmlns="http://www.w3.org/2000/svg"
                        aria-hidden="true" preserveAspectRatio="xMidYMid slice" focusable="false">
                        <rect width="100%" height="100%" fill="#D6E6F2"></rect>
                    </svg>
                    <!-- photo and text in carousel -->
                </div>
            </div>
            <button class="carousel-control-prev" type="button" data-bs-target="#myCarousel" data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#myCarousel" data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
            </button>
        </div>



</body>

</html>