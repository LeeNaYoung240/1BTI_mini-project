<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>1BTI:Home</title>
    <!-- Bootstrap CSS ìŠ¤íƒ€ì¼ì‹œíŠ¸ë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•œ link íƒœê·¸. -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <!-- Bootstrap JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>

    <style>
        /*í°íŠ¸*/
        @import url('https://fonts.googleapis.com/css2?family=Gowun+Dodum&display=swap');

        * {
            font-family: "Gowun Dodum", sans-serif;
        }

        /*ìƒë‹¨ì˜ ë¡œê³ */
        .title_logo {
            height: 100px;
            /*ë¡œê³  ë†’ì´ 150*/
            color: white;
            /*í…ìŠ¤íŠ¸ ìƒ‰ìƒ : white*/

            display: flex;
            /* flexbox ë ˆì´ì•„ì›ƒì„ ì‚¬ìš©í•˜ì—¬ ìš”ì†Œë¥¼ ê°€ìš´ë° ì •ë ¬ */
            flex-direction: column;
            /* ì„¸ë¡œ ë°©í–¥ìœ¼ë¡œ ë°°ì¹˜ */
            align-items: center;
            /* ìˆ˜í‰ê³¼ ìˆ˜ì§ìœ¼ë¡œ ê°€ìš´ë° ì •ë ¬ */
            justify-content: center;

            /* ë°°ê²½ ì´ë¯¸ì§€ ì„¤ì • */
            background-image: url('https://github.com/LeeNaYoung240/LeeNaYoung240.github.io/assets/107848521/6ec7b3af-603c-49e4-a70e-2144e82c7dc0');
            background-position: center;
            background-size: cover;
            /* ë°°ê²½ ì´ë¯¸ì§€ë¥¼ ì»¤ë²„í•˜ëŠ” í¬ê¸°ë¡œ ì„¤ì • */
        }

        .logoImage {
            width: 180px;
            height: 200px;
        }


        body {
            background-color: white;
        }

        .image>img {
            border-radius: 10px;
            box-shadow: 0px 0px 10px 0px rgba(0, 0, 0, 0.1);
        }


        .intro_container {
            width: calc(100% - 600px);
            max-width: 100%;
            border-radius: 10px;
            box-shadow: 0px 0px 10px 0px rgba(0, 0, 0, 0.1);
            display: inline-block;
            text-align: center;
            color: black;
        }
    </style>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script type="module">
        // Firebase SDK ë¼ì´ë¸ŒëŸ¬ë¦¬ ê°€ì ¸ì˜¤ê¸°
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
        import { getAuth, createUserWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-auth.js";
        import { getFirestore, collection, addDoc, getDocs, setDoc, doc, query, where } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
        import { getStorage, ref, uploadBytes } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-storage.js";
        import { getDownloadURL } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-storage.js";

        // Firebase êµ¬ì„± ì •ë³´ ì„¤ì •
        const firebaseConfig = {
            apiKey: "AIzaSyALOBgwNixaYE3Ckm2rVDAept8DluZ_d1E",
            authDomain: "bti-fbc0e.firebaseapp.com",
            projectId: "bti-fbc0e",
            storageBucket: "bti-fbc0e.appspot.com",
            messagingSenderId: "547737531654",
            appId: "1:547737531654:web:9d3670613d4e34a88f9a87",
            measurementId: "G-BHXZ7XND1Z"
        };

        // Firebase ì¸ìŠ¤í„´ìŠ¤ ì´ˆê¸°í™”
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        const storage = getStorage(app);


        // ëª¨ë‹¬ì°½ íŒ€ì› ì¶”ê°€ ë“±ë¡ ì €ì¥í•˜ê¸° ë²„íŠ¼ í´ë¦­ ì‹œ 
        $("#saveAddteam").click(async function () {

            let inputName = $('#inputName').val();
            let inputIntro = $('#inputIntro').val();
            let inputHobby = $('#inputHobby').val();
            let inputMbti = $('#inputMbti').val();
            let inputAdv = $('#inputAdv').val();
            let inputDis = $('#inputDis').val();
            let inputNickname = $('#inputNickname').val();
            let inputMotto = $('#inputMotto').val();
            let uploadPhoto = $('#uploadPhoto').prop('files')[0];

            // image url ì •ì˜
            let imageURL;

            try {
                const imageURL = await uploadImageAndGetURL(uploadPhoto);
                const teamMembersCollection = collection(db, 'teamMembers');
                // ë™ì¼í•œ ì´ë¦„ì´ ìˆëŠ” ì§€ í™•ì¸
                const querySnapshot = await getDocs(query(teamMembersCollection, where("Name", "==", inputName)));
                if (!querySnapshot.empty) {
                    alert("ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì´ë¦„ì´ì—ìš”. ì´ë¦„ ì˜†ì— Aë¥¼ ë¶™ì—¬ì£¼ì„¸ìš”.");
                    return;
                }
                // ì €ì¥ ì´ë¦„ ë³€ê²½ 
                await setDoc(doc(teamMembersCollection, inputName), {
                    Name: inputName,
                    Intro: inputIntro,
                    Hobby: inputHobby,
                    Mbti: inputMbti,
                    Adv: inputAdv,
                    Dis: inputDis,
                    Nickname: inputNickname,
                    Motto: inputMotto,
                    PhotoURL: imageURL,
                });

                $('#inputName').val('');
                $('#inputIntro').val('');
                $('#inputHobby').val('');
                $('#inputMbti').val('');
                $('#inputAdv').val('');
                $('#inputDis').val('');
                $('#inputNickname').val('');
                $('#inputMotto').val('');
                $('#uploadPhoto').val('');

                alert('ì¶•í•˜í•©ë‹ˆë‹¤. íŒ€ì›ìœ¼ë¡œ ë“±ë¡ë˜ì—ˆì–´ìš”!');
                window.location.reload();
            } catch (error) {
                // console.error("ë¬´ì—‡ì´ errorì¸ê°€ : ", error);
                alert('ì €ì¥ì— ì‹¤íŒ¨í•˜ì˜€ì–´ìš”.');
            }
        });

        // firebase storageì— image ì €ì¥ í›„ url ì£¼ì†Œ ê°€ì ¸ì˜¤ê¸° 
        async function uploadImageAndGetURL(imageFile) {
            try {
                const storageRef = ref(storage, 'images/' + imageFile.name);
                await uploadBytes(storageRef, imageFile);
                // firebase - storage ì—ì„œ ì´ë¯¸ì§€ì£¼ì†Œ ê°€ì ¸ì˜¤ê¸°
                const downloadURL = await getDownloadURL(storageRef);
                // console.log('Image URL:', downloadURL);
                return downloadURL;
            } catch (error) {
                // console.error('Error uploading image:', error); 
                throw error;
            }
        }

        function convertToEnglish(koreanName) {
            //í•œê¸€ ì´ë¦„ ì˜ì–´ ì´ë¦„ìœ¼ë¡œ ë³€í™˜
            const koreanToEnglish = {
                'ì´': 'lee', 'ë‚˜': 'na', 'ì˜': 'young',
                'ìœ¤': 'yoon', 'ì¼': 'il', 'ì˜': 'young',
                'ì¡°': 'jo', 'í˜„': 'hyun', 'ì•„': 'a',
                'ì •': 'jung', 'íš¨': 'hyo', 'ì§„': 'jin',
                'í•œ': 'han', 'í•´': 'hae', 'ì •': 'jung'
            };
            let englishName = ''; //ì˜ì–´ ì´ë¦„ ì €ì¥ ë³€ìˆ˜
            for (let char of koreanName) { //ì…ë ¥ëœ í•œê¸€ ì´ë¦„ì„ í•œ ê¸€ìì”© í™•ì¸, ì˜ì–´ë¡œ ë³€í™˜
                if (char in koreanToEnglish) { //í•´ë‹¹í•˜ëŠ” ê¸€ì ë§¤í•‘ì‹œ ì˜ì–´ë¡œ ë³€í™˜
                    englishName += koreanToEnglish[char];
                } else {
                    englishName += char;
                }
            }
            //ì˜ì–´ì´ë¦„ ë°˜í™˜
            return englishName;
        }

        $(document).ready(async function () {
            $('.carousel-inner').empty();
            // íŒ€ì› ì €ì¥ë‚´ìš© ë¶ˆëŸ¬ì˜¤ê¸°
            let docs = await getDocs(collection(db, "teamMembers"));

            docs.forEach((doc) => {
                let row = doc.data();
                let inputName = row['Name'];
                let inputIntro = row['Intro'];
                let inputHobby = row['Hobby'];
                let inputMbti = row['Mbti'];
                let inputAdv = row['Adv'];
                let inputDis = row['Dis'];
                let inputNickname = row['Nickname'];
                let inputMotto = row['Motto'];
                let photoURL = row['PhotoURL'];
                let englishName = convertToEnglish(inputName);
                //í•œê¸€ ì´ë¦„ì„ ì˜ì–´ë¡œ ë³€í™˜í•˜ì—¬ ì €ì¥
                let commentPageLink = `${englishName}_CommentPage.html`;
                //ì˜ì–´ ì´ë¦„ì„ ì´ìš©, í•´ë‹¹ ì´ë¦„ì˜ ì½”ë©˜íŠ¸ í˜ì´ì§€ ë§í¬ ìƒì„±


                let html = `
                <div class="carousel-item">
                    <svg class="bd-placeholder-img" width="100%" height="600px" xmlns="http://www.w3.org/2000/svg"
                        aria-hidden="true" preserveAspectRatio="xMidYMid slice" focusable="false">
                        <rect width="100%" height="100%" fill="#D6E6F2"></rect>
                    </svg>
                    <div class="container">
                        <div class="carousel-caption">
                            <div class="image">
                                <img align="left"
                                    src="${photoURL}"
                                    alt="${inputName}" style="width:400px;">
                            </div>
                            <div class="intro_container">
                                <h1>${inputName}</h1>

                                <div class="mbtiBtn">
                                    <button type="button" class="btn btn-primary position-relative">
                                        ${inputMbti}<span
                                            class="position-absolute top-0 start-100 translate-middle p-1 bg-danger border border-light rounded-circle">
                                            <i class="fas fa-heart text-white" style="font-size: 0.85rem;"></i>
                                            <span class="visually-hidden">New alerts</span>
                                        </span>
                                    </button>
                                </div>

                                <h5>ìê¸°ì†Œê°œì„œ ğŸ’â€â™€ï¸</h5>
                                <p> í•œ ì¤„ í‚¤ì›Œë“œ : ${inputIntro}</p>
                                <p> ì·¨ë¯¸ : ${inputHobby}</p>
                                <p> MBTI : ${inputMbti}</p>
                                <p> ì¥ì  : ${inputAdv}</p>
                                <p> ë‹¨ì  : ${inputDis}</p>
                                <p> ë³„ëª… : ${inputNickname}</p>
                                <p> ì¢Œìš°ëª… : ${inputMotto}</p>
                                <p><a class="btn btn-lg btn-primary" href="${commentPageLink}">Make a comment</a></p>
                            </div>
                        </div>
                    </div>
                </div>`;
                $('.carousel-inner').append(html);
            });

            $('.carousel-item').first().addClass('active');

            // carousel ì•„ë˜ ëª©ë¡ ë²„íŠ¼ ì¶”ê°€
            let indicatorCount = $('.carousel-indicators button').length; // ëª©ë¡ ê°œìˆ˜ í™•ì¸
            // ëª©ë¡ ë²„íŠ¼ ì¶”ê°€
            let newIndicator = `<button type="button" data-bs-target="#myCarousel" data-bs-slide-to="${indicatorCount}" aria-label="Slide ${indicatorCount + 1}"></button>`;
            $('.carousel-indicators').append(newIndicator);
            // ê¸°ì¡´ ë§ˆì§€ë§‰ ëª©ë¡ë²„íŠ¼ active ì‚­ì œ, ë§ˆì§€ë§‰ ëª©ë¡ë²„íŠ¼ì— active ê¸°ëŠ¥ ì¶”ê°€
            $('.carousel-indicators button').removeClass('active');
            $(`.carousel-indicators button[data-bs-slide-to="${indicatorCount}"]`).addClass('active');

        });





    </script>
</head>

<body>
    <header class="p-3 text-bg-dark">
        <!-- ì»¨í…Œì´ë„ˆë¥¼ í¬í•¨í•˜ëŠ” div ìš”ì†Œë¡œ í—¤ë”ë¥¼ ê°ì‹¸ì¤Œ -->
        <div class="container">
            <!-- flexboxë¥¼ ì‚¬ìš©í•˜ì—¬ ìš”ì†Œë“¤ì„ ê°€ë¡œë¡œ ì •ë ¬ -->
            <div class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start">
                <!-- ë¡œê³  ë§í¬, í™ˆìœ¼ë¡œ ì´ë™í•˜ëŠ” ë§í¬ë¡œ ì„¤ì •-->
                <a href="/" class="d-flex align-items-center mb-2 mb-lg-0 text-white text-decoration-none">
                    <svg class="bi me-2" width="40" height="32" role="img" aria-label="Bootstrap">
                        <use xlink:href="#bootstrap"></use>
                    </svg>
                </a>
                <img src="https://github.com/LeeNaYoung240/LeeNaYoung240.github.io/assets/107848521/7a88cc7b-a0cc-46ff-b75a-f5be7abb13c2"
                    alt="íŒ€ ë¡œê³ " width="200" height="150">
                <!-- ë©”ë‰´ ëª©ë¡ -->
                <ul class="nav col-12 col-lg-auto me-lg-auto mb-2 justify-content-center mb-md-0">
                    <li><a href="Home.html" class="nav-link px-2 text-secondary">Home</a></li>
                    <li><a href="q_a.html" class="nav-link px-2 text-secondary">Q&A</a></li>
                    <li><a href="swipe_intro.html" class="nav-link px-2 text-danger">Team</a></li>
                    <li><a href="feedback.html" class="nav-link px-2 text-secondary">ì„¤ë¬¸ í•˜ëŸ¬ê°€ê¸°</a></li>
                    <li><a href="#" class="nav-link px-2 text-secondary" data-bs-toggle="modal"
                            data-bs-target="#addTeamModal">íŒ€ì› ë“±ë¡í•˜ê¸°</a></li>
                </ul>
            </div>
        </div>
    </header>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <div class="main">
        <!-- ìƒˆë¡œìš´ íŒ€ì›ì¶”ê°€ Modalì°½ -->
        <div class="modal fade" id="addTeamModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header">
                        <h1 class="modal-title fs-5" id="modalTitle">íŒ€ì› ì¶”ê°€</h1>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <div class="form-floating mb-3">
                            <input type="text" class="form-control" id="inputName" placeholder="ì´ë¦„">
                            <label for="floatingInput">ì´ë¦„</label>
                        </div>
                        <div class="form-floating mb-3">
                            <input type="text" class="form-control" id="inputIntro" placeholder="í•œ ì¤„ ì†Œê°œ">
                            <label for="floatingInput">í•œ ì¤„ ì†Œê°œ</label>
                        </div>
                        <div class="form-floating mb-3">
                            <input type="text" class="form-control" id="inputHobby" placeholder="ì·¨ë¯¸">
                            <label for="floatingInput">ì·¨ë¯¸</label>
                        </div>
                        <div class="form-floating mb-3">
                            <input type="text" class="form-control" id="inputMbti" placeholder="MBTI">
                            <label for="floatingInput">MBTI</label>
                        </div>
                        <div class="form-floating mb-3">
                            <input type="text" class="form-control" id="inputAdv" placeholder="ì¥ì ">
                            <label for="floatingInput">ì„±ê²©ì˜ ì¥ì </label>
                        </div>
                        <div class="form-floating mb-3">
                            <input type="text" class="form-control" id="inputDis" placeholder="ë‹¨ì ">
                            <label for="floatingInput">ì„±ê²©ì˜ ë‹¨ì </label>
                        </div>
                        <div class="form-floating mb-3">
                            <input type="text" class="form-control" id="inputNickname" placeholder="ë³„ëª…">
                            <label for="floatingInput">ë³„ëª…</label>
                        </div>
                        <div class="form-floating mb-3">
                            <input type="text" class="form-control" id="inputMotto" placeholder="ì¢Œìš°ëª…">
                            <label for="floatingInput">ì¢Œìš°ëª…</label>
                        </div>
                        <div class="input-group mb-3">
                            <label class="input-group-text" for="inputGroupFile01">ë‚˜ì˜ ì‚¬ì§„</label>
                            <input type="file" class="form-control" id="uploadPhoto">
                        </div>
                        <div class="modal-footer">
                            <button id="saveAddteam" type="button" class="btn btn-primary">ì €ì¥í•˜ê¸°</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>


        <!-- carousel -->
        <div id="myCarousel" class="carousel slide mb-6" data-bs-ride="carousel">
            <div class="carousel-indicators">
                <button type="button" data-bs-target="#myCarousel" data-bs-slide-to="0" aria-label="Slide 1"
                    class=""></button>
                <button type="button" data-bs-target="#myCarousel" data-bs-slide-to="1" aria-label="Slide 2"
                    class=""></button>
                <button type="button" data-bs-target="#myCarousel" data-bs-slide-to="2" aria-label="Slide 3"
                    class=""></button>
                <button type="button" data-bs-target="#myCarousel" data-bs-slide-to="3" aria-label="Slide 4" class=""
                    aria-current="true"></button>
            </div>

            <div class="carousel-inner">
                <div class="carousel-item">
                    <svg class="bd-placeholder-img" width="100%" height="600px" xmlns="http://www.w3.org/2000/svg"
                        aria-hidden="true" preserveAspectRatio="xMidYMid slice" focusable="false">
                        <rect width="100%" height="100%" fill="#D6E6F2"></rect>
                    </svg>
                    <!-- photo and text in carousel -->
                </div>
                <div class="carousel-item">
                    <svg class="bd-placeholder-img" width="100%" height="600px" xmlns="http://www.w3.org/2000/svg"
                        aria-hidden="true" preserveAspectRatio="xMidYMid slice" focusable="false">
                        <rect width="100%" height="100%" fill="#D6E6F2"></rect>
                    </svg>
                    <!-- photo and text in carousel -->
                </div>
                <div class="carousel-item active">
                    <svg class="bd-placeholder-img" width="100%" height="600px" xmlns="http://www.w3.org/2000/svg"
                        aria-hidden="true" preserveAspectRatio="xMidYMid slice" focusable="false">
                        <rect width="100%" height="100%" fill="#D6E6F2"></rect>
                    </svg>
                    <!-- photo and text in carousel -->
                </div>
                <div class="carousel-item">
                    <svg class="bd-placeholder-img" width="100%" height="600px" xmlns="http://www.w3.org/2000/svg"
                        aria-hidden="true" preserveAspectRatio="xMidYMid slice" focusable="false">
                        <rect width="100%" height="100%" fill="#D6E6F2"></rect>
                    </svg>
                    <!-- photo and text in carousel -->
                </div>
            </div>
            <button class="carousel-control-prev" type="button" data-bs-target="#myCarousel" data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#myCarousel" data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
            </button>
        </div>



</body>

</html>